<div valign="center">
<img alt="logo_UGent_EN_RGB_2400_color" src="https://github.com/eliasnijs/python-flowsum/assets/37975937/0a7c142e-2375-4992-8eea-ead1129fae1d" height=90</img>
<img alt="icon_UGent_WE_EN_RGB_2400_color" src="https://github.com/eliasnijs/python-flowsum/assets/37975937/d4dab401-0484-4a0f-8c4a-dd3f325814fe" height=70></img>
</div>

# PyFlowSOM

![](https://img.shields.io/badge/Field-Bioinformatics-red)
![](https://img.shields.io/badge/Field-Machine_Learning-red)
![](https://img.shields.io/badge/Field-Data_Visualisation-red)
![](https://img.shields.io/badge/Language-Python-green)
![](https://img.shields.io/badge/Institute-Universiteit_Gent-blue)

PyFlowSOM implements and optimizes the FlowSOM algorithm for large datasets in Python, improving the accessibility and user experience for researchers studying high-dimensional flow cytometry data. Furthermore, it provides a GUI for this algorithm extending it's accessibility to researchers without a programming background.


## Install

1. Clone the repository to your local machine using
```
git clone https://github.com/eliasnijs/python-flowsum
```
3. Go to the root of the project folder with 
```
cd python-flowsom/`
```
6. Install the required packages using
```
pip install -r requirements.txt
```

## Use

To use the the FlowSOM package, use
```
import flowsom as fs
```

To run the GUI, use
```
./scripts/flowsomtool.sh
```

## Documentation

Docuemntation can be found under `docs/build/html/index.html`

## Directory structure

| Directory/File  | Purpose |
| ------------- | ------------- |
| `data/`  | Houses output images generated by the program (e.g., `image1.png`, `image2.png`, `image3.png`). |
| `docs/`  | Houses the documentation and sphinx setup |
| `LICENSE`  | Contains the license for the project. |
| `README.md`  | The main documentation file containing project overview and instructions. |
| `reporting/`  | Contains the report and proposal directories, each with various files related to the creation of reports and proposals (e.g., `build.sh`, `verslag.ms`, `verslag.pdf`). |
| `requirements_dev.txt`  | Specifies dependencies for development environment. |
| `requirements.txt`  | Specifies dependencies for the project. |
| `research/`  | Contains Jupyter notebooks (e.g., `workflow.ipynb`) related to project research. |
| `resources/`  | Contains possible input files for the program (e.g., `Levine_13dim.fcs`). |
| `scripts/`  | Houses various script files needed for project operations (e.g., `build.sh`, `doctests.sh`, `run.sh`, `test.sh`). |
| `src/`  | Contains source code for the project (e.g., `main.py`). |
| `tests/`  | Contains test scripts for the project. |

## Developer guidelines

Before starting development on this repository, ensure that the following software is installed on your system:

- Python 3.6 or higher
- `pip`

### Installation

To get started, follow these steps:

1. Clone the repository to your local machine using `git clone https://github.com/eliasnijs/python-flowsum`.
2. Go to the root of the project folder with `cd python-flowsom/`
3. Install the required packages using `pip install -r requirements.txt`.
4. Install the development packages using `pip install -r requirements_dev.txt`.
5. Navigate to the root directory of the repository.
6. Run `pre-commit install` to install the pre-commit hooks in your local repository.

### Requirements

**Program Requirements:**

see above.

**Development Requirements:**
| Package Name   | Description                                                          | Version   |
|----------------|----------------------------------------------------------------------|-----------|
| pre-commit     | A framework for managing and maintaining multi-language pre-commit hooks | 2.15.0 |
| pytest         | Testing framework for Python                                           | 6.2.5     |
| pytest-cov     | Pytest plugin for measuring test coverage                              | 3.0.0     |
| pytest-doctestplus | Pytest plugin for running doctests in a unittest framework            | 0.14.0    |
| pyyaml         | Package for working with YAML files in Python                          | 5.4.1     |
| bandit         | Security linter for Python source code                                 | 1.7.0     |
| black          | Python code formatter                                                 | 21.9b0   |
| flake8         | Python code linter                                                    | 4.0.1     |
| isort          | Python utility/library to sort imports alphabetically                 | 5.9.3     |

### Scripts

The following scripts are available in the `scripts/` folder:

| Script | Description |
|--------|-------------|
| `run.sh` | Runs the main program. |
| `build.sh` | Runs pre-commit on all files and generates the `requirements.txt` file using `pipreqs`. |
| `doctests.sh` | Runs all doctests. |
| `tests.sh` | Runs all tests. |

### Testing

To run all tests, execute `tests.sh` in the scripts folder.

### Pre-commit Configuration

Pre-commit is used to ensure all code lives up to a standard.

Pre-commit checks will automatically run on your changes when you run `git commit`. If any errors or warnings are detected, the commit will be aborted, and you will need to fix the issues and try again.

The pre-commit configuration for this repository is as follows:

| Repository | Hook ID | Arguments |
|------------|---------|-----------|
| https://github.com/pre-commit/pre-commit-hooks | check-yaml | - |
| https://github.com/pre-commit/pre-commit-hooks | end-of-file-fixer | - |
| https://github.com/pre-commit/pre-commit-hooks | trailing-whitespace | - |
| https://github.com/psf/black | black | - |
| https://github.com/PyCQA/flake8 | flake8 | `--statistics` |
| https://github.com/PyCQA/bandit | bandit | `--quiet` |
| https://github.com/pycqa/isort | isort | - |

This configuration specifies several hooks to run as part of the pre-commit checks, including:

- `check-yaml`: Checks the syntax of YAML files.
- `end-of-file-fixer`: Adds a newline to the end of files that don't have one.
- `trailing-whitespace`: Removes trailing whitespace at the end of lines.
- `black`: Automatically formats Python code to conform to the Black code style.
- `flake8`: Performs several checks on Python code, including syntax and style errors.
- `bandit`: Scans Python code for common security issues.
- `isort`: Automatically sorts Python import statements according to PEP 8 guidelines.

These hooks are designed to ensure that the code in the repository meets certain standards for syntax, style, and security.

**Copyright notice:**
```
Copyright (c) 2023 Elias Nijs
Licensed under the MIT License. See LICENSE.md for more information.
```
